# Тестовое задание для студии "INDEX"
![Workflow](https://github.com/istillmissyou/test_guru/actions/workflows/test_guru_workflow.yml/badge.svg)

Проект запущен на сервере (cloud.yandex.ru)
![Доступ](http://51.250.104.235/)

## Кандидат

Штунь Данил

## Описание

* **GET /api/v1/city/** — получение всех городов из базы
* **POST /api/v1/city/** — создание города
* **GET /api/v1/city/city_id/street/** —  получение всех улиц города; (city_id —
идентификатор города)
*  **POST /api/v1/city/city_id/street/** —  создание улицы в городе; (city_id —
идентификатор города)
* **POST /api/v1/shop/** —  создание магазина; Данный метод получает json c
объектом магазина, в ответ возвращает данные созданной записи
* **GET /api/v1/shop/?street=&city=&open=0/1** — получение списка магазинов.
I. Метод принимает параметры для фильтрации. Параметры не обязательны. В
случае отсутствия параметров выводится все магазины, если хоть один параметр
есть, то по нему выполнятся фильтрации.
II. Важно! В объекте каждого магазина выводится название города и улицы, а не id
записей.
III. Параметр open: 0 - закрыт, 1 - открыт. Данный статус определяет исход из
параметров «Врем открытия», «Врем закрытия» и текущего времени сервера.

Использована технология JWT-токена
* **POST /api/auth/users/** — создание пользователя
* **POST /api/auth/jwt/create/** — передать username и password пользователя. В полученном токене скопировать "access" и вставить в Headers где `KEY` добавить `Authorization`, в поле `VALUE` добавить `Bearer access`, где access вставить с полученного токена. Теперь можно отправлять запросы!

## Использованные технологии

* Python 3.10.6
* Django 4.1.2
* Django Rest Framework 3.14.0
* Simple-JWT 4.8.0
* Gunicorn 20.1.0

## Подготовительные действия

Клонировать проект 

```
git clone https://github.com/istillmissyou/test_guru.git
```

Установить Docker

```
sudo apt install docker.io
```

```
sudo apt install docker-compose
```


### Шаблон наполнения env-файла

```
DB_ENGINE=указываем, что работаем с postgresql
DB_NAME=имя базы данных
POSTGRES_USER=логин для подключения к базе данных
POSTGRES_PASSWORD=пароль для подключения к БД (установите свой)
DB_HOST=название сервиса (контейнера)
DB_PORT=порт для подключения к БД 
```

### Как запустить проект:

Клонировать репозиторий и перейти в директорию "infra" открыть файл docker-compose.yaml и в 11 строке поменять `image: ssd256/test_guru` на `build: .` Дальше в командной строке:

```
sudo docker-compose up
```

Проект запущен!

